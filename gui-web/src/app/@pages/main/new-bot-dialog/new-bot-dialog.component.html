<div class="dialog-container">
    <mat-card>
        <mat-card-header><h1>Creating New Bot</h1></mat-card-header>
        <mat-card-content>
            <div class="content-condainer">
                <div class="section" [formGroup]='cbFb'>
                    <p>
                        <mat-form-field>
                            <mat-label>Pair: </mat-label>
                            <mat-select formControlName='pair'>
                                <mat-option value="ADAUSDT">ADA/USDT</mat-option>
                                <mat-option value="LTCUSDT" disabled>LTC/USDT</mat-option>
                                <mat-option value="BTCUSDT" disabled>BTC/USDT</mat-option>
                            </mat-select>
                          </mat-form-field>
                          <mat-form-field>
                            <mat-label>Start With: </mat-label>
                            <input formControlName='initAmount' step='1' type="number" matInput>
                          </mat-form-field>
                    </p>
                    <p>
                        <mat-form-field>
                            <mat-label>Trade Amount (n * equity) </mat-label>
                            <input formControlName='percentForEachTrade' step='0.01' type="number" matInput>
                          </mat-form-field>
                          <mat-form-field>
                            <mat-label>Leverage: </mat-label>
                            <input formControlName='leverage' step='1' type="number" matInput>
                          </mat-form-field>
                    </p>
                </div>
                <div class="strategies" [formGroup]='sFb'>
                        <mat-form-field>
                            <mat-label>Strategy: </mat-label>
                            <mat-select formControlName='strategy'>
                                <mat-option value='1m-5m'>1m-5m</mat-option>
                                <mat-option value='1h-7m'>1h-7m</mat-option>
                                <mat-option value='1h-15m'>1h-15m</mat-option>
                                <mat-option value='pb'>Peak & Bottom</mat-option>

                            </mat-select>
                          </mat-form-field>
                </div>
                <div class="sltp" [formGroup]='sltpFB' *ngIf='sFb.value.strategy === "pb"'>
                    <mat-form-field>
                        <mat-label>Stop Loss</mat-label>
                        <input formControlName='sl' step='0.001' type="number" matInput>
                      </mat-form-field>
                      <mat-form-field>
                        <mat-label>Take Profit</mat-label>
                        <input formControlName='tp' step='0.001' type="number" matInput>
                      </mat-form-field>
            </div>
                <div class="yxbd" [formGroup]='yxbdFb'>
                    <div class='sub'>
                        <p style='width: 15%'>
                            <mat-checkbox formControlName='yx' labelPosition="before">YX: </mat-checkbox>
                        </p>
                        <p style='width: 40%'>
                            <mat-form-field [ngStyle]='{"display" : yxbdFb.value.yx ? "inline-block" : "none" }'>
                                <mat-label>YX Action: </mat-label>
                                <mat-select formControlName='yxAction'>
                                    <mat-option value='closeLong'>Close Long Position</mat-option>
                                    <mat-option value='openShort'>Open Short Position</mat-option>
                                    <mat-option value='timeout' disabled>Timeout</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </p>
                        <p style='width: 45%'>
                            <mat-form-field [ngStyle]='{"display" : yxbdFb.value.yx && yxbdFb.value.yxAction === "timeout" ? "inline-block" : "none" }'>
                                <mat-label>Timeout (candles): </mat-label>
                                <input formControlName='yxTimeout' step='1' type="number" matInput>
                            </mat-form-field>
                        </p>
                    </div>
                    <div class='sub'>
                        <p style='width: 15%'>
                            <mat-checkbox formControlName='bd' labelPosition="before">BD: </mat-checkbox>
                        </p>
                        <p style='width: 40%'>
                            <mat-form-field [ngStyle]='{"display" : yxbdFb.value.bd ? "inline-block" : "none" }'>
                                <mat-label>BD Action: </mat-label>
                                <mat-select formControlName='bdAction'>
                                    <mat-option value='closeLong'>Close Long Position</mat-option>
                                    <mat-option value='openShort'>Open Short Position</mat-option>
                                    <mat-option value='timeout' disabled>Timeout</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </p>
                        <p style='width: 45%'>
                            <mat-form-field [ngStyle]='{"display" : yxbdFb.value.bd && yxbdFb.value.bdAction === "timeout" ? "inline-block" : "none" }'>
                                <mat-label>Timeout (candles): </mat-label>
                                <input formControlName='bdTimeout' step='1' type="number" matInput>
                            </mat-form-field>
                        </p>
                    </div>
                </div>
                <!-- <div class="section" [formGroup]='cbFb'>
                    <p>
                        <mat-checkbox color='primary' formControlName='isSl' #sl labelPosition='before'>Stop Loss: </mat-checkbox>
                        <mat-form-field [ngClass]="{ invisible: !sl.checked }">
                            <mat-label>n * equity</mat-label>
                            <input formControlName='sl' step='1' type="number" matInput>
                          </mat-form-field>
                    </p>
                    <p class='tsl'>
                        <mat-checkbox color='primary' formControlName='isTsl' #tsl labelPosition='before'>Trailing SL: </mat-checkbox>
                        <span>
                            <mat-form-field [ngClass]="{ invisible: !tsl.checked }">
                                <mat-label>Act.rate (n * equity)</mat-label>
                                <input formControlName='tslAct' step='0.01' type="number" matInput>
                            </mat-form-field>
                            <mat-form-field [ngClass]="{ invisible: !tsl.checked }">
                                <mat-label>Callback Rate</mat-label>
                                <input formControlName='tslCBRate' step='0.01' type="number" matInput>
                            </mat-form-field>
                        </span>
                    </p>
                </div> -->
                <!-- <div class="alertSection" [formGroup]='alertsFormGroup'>
                    <div class="alertSubSection" style='color: green'>
                        <div class="alert" *ngFor='let alert of alerts.long'>
                            <mat-checkbox color='primary' [formControlName]='"bbol_" + alert' labelPosition='before'>
                                {{ extractAlertNameByValue(alert) | titlecase}}
                            </mat-checkbox>
                            <mat-select
                                placeholder='Alert Type'
                                [formControlName]='alert'
                                *ngIf='alertsFormGroup.value["bbol_" + alert]'
                            >
                                <mat-option value="CP">Close Position</mat-option>
                                <mat-option value="OP">Open Position</mat-option>
                                <mat-option value="COP">Close and Open</mat-option>
                            </mat-select>
                        </div>
                    </div>
                    <div class="alertSubSection" style='color: red'>
                        <div class="alert" *ngFor='let alert of alerts.short'>
                            <mat-checkbox  color='primary'  [formControlName]='"bbol_" + alert' labelPosition='before'>
                                {{ extractAlertNameByValue(alert) | titlecase}}
                            </mat-checkbox>
                            <mat-select
                                placeholder='Alert Type'
                                [formControlName]='alert'
                                *ngIf='alertsFormGroup.value["bbol_" + alert]'
                            >
                                <mat-option value="CP">Close Position</mat-option>
                                <mat-option value="OP">Open Position</mat-option>
                                <mat-option value="COP">Close and Open</mat-option>
                            </mat-select>
                        </div>
                    </div>
                </div> -->
            </div>
        </mat-card-content>
        <div class="buttons">
            <button mat-raised-button color="primary" (click)="addBot()" [disabled]='!cbFb.valid || !sFb.valid'>Add new Bot</button>
        </div>
    </mat-card>
</div>